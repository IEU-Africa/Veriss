<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile - Veriss Payments</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
      /* CSS Custom Properties for Veriss Payments Brand Colors */
      :root {
        --primary-50: #f0f9ff;
        --primary-100: #e0f2fe;
        --primary-200: #bae6fd;
        --primary-300: #7dd3fc;
        --primary-400: #38bdf8;
        --primary-500: #0ea5e9;
        --primary-600: #0284c7;
        --primary-700: #0369a1;
        --primary-800: #075985;
        --primary-900: #0c4a6e;

        --success-50: #f0fdf4;
        --success-100: #dcfce7;
        --success-200: #bbf7d0;
        --success-300: #86efac;
        --success-400: #4ade80;
        --success-500: #22c55e;
        --success-600: #16a34a;
        --success-700: #15803d;

        --neutral-50: #fafafa;
        --neutral-100: #f5f5f5;
        --neutral-200: #e5e5e5;
        --neutral-300: #d4d4d4;
        --neutral-400: #a3a3a3;
        --neutral-500: #737373;
        --neutral-600: #525252;
        --neutral-700: #404040;
        --neutral-800: #262626;
        --neutral-900: #171717;
      }

      /* Modern card styling */
      .modern-card {
        background: white;
        border-radius: 1rem;
        padding: 1.5rem;
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      }

      .modern-card-compact {
        background: white;
        border-radius: 1rem;
        padding: 1rem;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      }

      @media (min-width: 640px) {
        .modern-card {
          border-radius: 1.5rem;
          padding: 2.5rem;
        }
        .modern-card-compact {
          padding: 1.5rem;
        }
      }

      /* Modern input styling */
      .modern-input {
        width: 100%;
        padding: 0.75rem 0.875rem;
        border: 2px solid var(--neutral-200);
        border-radius: 0.75rem;
        font-size: 0.875rem;
        transition: all 0.2s;
        background: white;
      }

      @media (min-width: 640px) {
        .modern-input {
          padding: 0.875rem 1rem;
          font-size: 1rem;
        }
      }

      .modern-input:focus {
        outline: none;
        border-color: var(--primary-500);
        box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.1);
      }

      .modern-input:disabled {
        background-color: var(--neutral-50);
        cursor: not-allowed;
        opacity: 0.6;
      }

      .modern-input::placeholder {
        color: var(--neutral-400);
      }

      /* Select styling */
      select.modern-input {
        background-image: none;
        appearance: none;
        cursor: pointer;
      }

      /* Button styling */
      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        font-weight: 600;
        border-radius: 0.75rem;
        transition: all 0.2s;
        cursor: pointer;
        border: none;
      }

      .btn-primary {
        background: linear-gradient(135deg, var(--primary-500) 0%, var(--primary-600) 100%);
        color: white;
        padding: 0.875rem 1.5rem;
      }

      .btn-primary:hover:not(:disabled) {
        background: linear-gradient(135deg, var(--primary-600) 0%, var(--primary-700) 100%);
        transform: translateY(-2px);
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      }

      .btn-primary:active:not(:disabled) {
        transform: translateY(0);
      }

      .btn-primary:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }

      .btn-secondary {
        background: var(--neutral-200);
        color: var(--neutral-700);
        padding: 0.875rem 1.5rem;
      }

      .btn-secondary:hover:not(:disabled) {
        background: var(--neutral-300);
        transform: translateY(-2px);
      }

      /* Link styling */
      .modern-link {
        color: var(--primary-600);
        text-decoration: none;
        transition: color 0.2s;
      }

      .modern-link:hover {
        color: var(--primary-700);
        text-decoration: underline;
      }

      /* Profile avatar styling */
      .profile-avatar {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        font-weight: 700;
        color: white;
        background: linear-gradient(135deg, var(--primary-500) 0%, var(--primary-700) 100%);
        box-shadow: 0 10px 25px -5px rgba(14, 165, 233, 0.4);
      }

      @media (min-width: 640px) {
        .profile-avatar {
          width: 120px;
          height: 120px;
          font-size: 3rem;
        }
      }

      /* Referral code card */
      .referral-card {
        background: linear-gradient(135deg, var(--success-50) 0%, var(--success-100) 100%);
        border: 2px solid var(--success-200);
        border-radius: 1rem;
        padding: 1rem;
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }

      .referral-code {
        font-family: 'Courier New', monospace;
        font-size: 1rem;
        font-weight: 700;
        color: var(--success-700);
        background: white;
        padding: 0.5rem 0.75rem;
        border-radius: 0.5rem;
        border: 2px dashed var(--success-300);
        word-break: break-all;
      }

      @media (min-width: 640px) {
        .referral-card {
          padding: 1.25rem;
          gap: 1rem;
        }
        .referral-code {
          font-size: 1.25rem;
          padding: 0.5rem 1rem;
        }
      }

      /* Loading skeleton */
      .skeleton {
        background: linear-gradient(90deg, var(--neutral-200) 25%, var(--neutral-100) 50%, var(--neutral-200) 75%);
        background-size: 200% 100%;
        animation: loading 1.5s ease-in-out infinite;
        border-radius: 0.5rem;
      }

      @keyframes loading {
        0% {
          background-position: 200% 0;
        }

        100% {
          background-position: -200% 0;
        }
      }

      /* Edit mode toggle */
      .edit-toggle {
        position: absolute;
        top: 1rem;
        right: 1rem;
      }

      @media (min-width: 640px) {
        .edit-toggle {
          top: 2rem;
          right: 2rem;
        }
      }

      /* Custom SweetAlert2 styling */
      .swal2-popup {
        border-radius: 1rem !important;
        padding: 2rem !important;
      }

      .swal2-confirm {
        background: linear-gradient(135deg, var(--primary-500) 0%, var(--primary-600) 100%) !important;
        border-radius: 0.5rem !important;
        padding: 0.75rem 2rem !important;
        font-weight: 600 !important;
      }
    </style>
  </head>

  <body class="bg-gradient-to-br from-neutral-50 to-neutral-100">
    <div id="app" class="min-h-screen py-12 px-4 sm:px-6 lg:px-8">
      <div class="max-w-4xl mx-auto">

        <!-- Back Navigation -->
        <div class="mb-4 sm:mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3">
          <a href="user-dashboard.html"
            class="inline-flex items-center gap-2 font-semibold text-sm sm:text-base transition-all hover:scale-105"
            style="color: var(--primary-600);">
            <i data-lucide="arrow-left" class="w-4 h-4"></i>
            <span class="hidden sm:inline">Back to Dashboard</span>
            <span class="sm:hidden">Back</span>
          </a>
          <button @click="handleLogout"
            class="inline-flex items-center gap-2 px-2 sm:px-3 py-1.5 text-xs sm:text-sm text-white border-2 border-red-600 rounded bg-red-600 transition-all">
            <i data-lucide="log-out" class="w-3 h-3 sm:w-4 sm:h-4"></i>
            <span class="hidden sm:inline">Logout</span>
          </button>
        </div>

        <!-- Profile Card -->
        <div class="modern-card shadow-2xl relative">

          <!-- Edit Mode Toggle -->
          <div class="edit-toggle">
            <button v-if="!isEditMode" @click="enableEditMode" class="btn btn-secondary text-xs sm:text-sm px-2 sm:px-3 py-1.5 sm:py-2" :disabled="isLoading">
              <i data-lucide="edit-2" class="w-3 h-3 sm:w-4 sm:h-4"></i>
              <span class="hidden sm:inline">Edit Profile</span>
              <span class="sm:hidden">Edit</span>
            </button>
            <button v-else @click="cancelEdit" class="btn btn-secondary text-xs sm:text-sm px-2 sm:px-3 py-1.5 sm:py-2">
              <i data-lucide="x" class="w-3 h-3 sm:w-4 sm:h-4"></i>
              <span class="hidden sm:inline">Cancel</span>
            </button>
          </div>

          <!-- Profile Header -->
          <div class="text-center mb-6 sm:mb-8">
            <!-- Avatar with Initials -->
            <div class="flex justify-center mb-3 sm:mb-4">
              <div class="profile-avatar" v-if="!isLoading">
                {{ getInitials(profileData.fullName) }}
              </div>
              <div v-else class="skeleton" style="width: 80px; height: 80px; border-radius: 50%;"></div>
            </div>

            <!-- Name and Email -->
            <div v-if="!isLoading">
              <h1 class="text-xl sm:text-2xl lg:text-3xl font-extrabold mb-2 break-words" style="color: var(--neutral-900);">
                {{ profileData.fullName }}
              </h1>
              <p class="font-medium text-sm sm:text-base break-words" style="color: var(--neutral-600);">
                {{ profileData.email }}
              </p>
            </div>
            <div v-else class="space-y-2">
              <div class="skeleton h-6 sm:h-8 w-48 sm:w-64 mx-auto"></div>
              <div class="skeleton h-4 sm:h-5 w-32 sm:w-48 mx-auto"></div>
            </div>
          </div>

          <!-- Referral Code Section -->
          <div v-if="!isLoading && profileData.referralCode" class="mb-6 sm:mb-8">
            <div class="referral-card">
              <div class="flex-1 min-w-0">
                <p class="text-xs sm:text-sm font-semibold mb-1" style="color: var(--success-800);">Your Referral Code</p>
                <div class="referral-code break-all">{{ profileData.referralCode }}</div>
              </div>
              <button @click="copyReferralCode" class="p-2 sm:p-3 rounded-lg transition-all hover:bg-white flex-shrink-0"
                style="color: var(--success-600);">
                <i data-lucide="copy" class="w-4 h-4 sm:w-5 sm:h-5"></i>
              </button>
            </div>
          </div>

          <!-- Profile Form -->
          <form @submit.prevent="updateProfile" class="space-y-4 sm:space-y-6">

            <!-- Personal Information Section -->
            <div class="modern-card-compact" style="background: var(--neutral-50);">
              <h3 class="text-base sm:text-lg font-bold mb-3 sm:mb-4 flex items-center gap-2" style="color: var(--neutral-900);">
                <i data-lucide="user" class="w-4 h-4 sm:w-5 sm:h-5" style="color: var(--primary-600);"></i>
                Personal Information
              </h3>

              <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-5">

                <!-- Title -->
                <div>
                  <label for="title" class="block text-sm font-bold mb-2" style="color: var(--neutral-700);">
                    Title <span style="color: #ef4444;">*</span>
                  </label>
                  <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none z-10">
                      <i data-lucide="user-circle" class="w-5 h-5" style="color: var(--neutral-400);"></i>
                    </div>
                    <select v-model="profileData.title" id="title" :disabled="!isEditMode || isLoading"
                      class="modern-input pl-12 text-base">
                      <option value="">Select title</option>
                      <option value="Mr.">Mr.</option>
                      <option value="Mrs.">Mrs.</option>
                      <option value="Miss">Miss</option>
                      <option value="Dr.">Dr.</option>
                      <option value="Prof.">Prof.</option>
                    </select>
                    <div class="absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none">
                      <i data-lucide="chevron-down" class="w-5 h-5" style="color: var(--neutral-400);"></i>
                    </div>
                  </div>
                </div>

                <!-- Full Name -->
                <div>
                  <label for="fullName" class="block text-sm font-bold mb-2" style="color: var(--neutral-700);">
                    Full Name <span style="color: #ef4444;">*</span>
                  </label>
                  <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                      <i data-lucide="user" class="w-5 h-5" style="color: var(--neutral-400);"></i>
                    </div>
                    <input v-model="profileData.fullName" id="fullName" type="text" required
                      :disabled="!isEditMode || isLoading" class="modern-input pl-12 text-base" placeholder="John Doe">
                  </div>
                </div>

                <!-- Email (Read-only) -->
                <div>
                  <label for="email" class="block text-sm font-bold mb-2" style="color: var(--neutral-700);">
                    Email Address
                  </label>
                  <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                      <i data-lucide="mail" class="w-5 h-5" style="color: var(--neutral-400);"></i>
                    </div>
                    <input v-model="profileData.email" id="email" type="email" disabled
                      class="modern-input pl-12 text-base" placeholder="you@example.com">
                  </div>
                  <p class="mt-1 text-xs" style="color: var(--neutral-500);">Email cannot be changed</p>
                </div>

                <!-- Gender -->
                <div>
                  <label for="gender" class="block text-sm font-bold mb-2" style="color: var(--neutral-700);">
                    Gender <span style="color: #ef4444;">*</span>
                  </label>
                  <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none z-10">
                      <i data-lucide="users" class="w-5 h-5" style="color: var(--neutral-400);"></i>
                    </div>
                    <select v-model="profileData.gender" id="gender" :disabled="!isEditMode || isLoading"
                      class="modern-input pl-12 text-base">
                      <option value="">Select gender</option>
                      <option value="male">Male</option>
                      <option value="female">Female</option>
                      <option value="other">Other</option>
                    </select>
                    <div class="absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none">
                      <i data-lucide="chevron-down" class="w-5 h-5" style="color: var(--neutral-400);"></i>
                    </div>
                  </div>
                </div>

                <!-- Phone Number -->
                <div>
                  <label for="phoneNumber" class="block text-sm font-bold mb-2" style="color: var(--neutral-700);">
                    Phone Number <span style="color: #ef4444;">*</span>
                  </label>
                  <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                      <i data-lucide="phone" class="w-5 h-5" style="color: var(--neutral-400);"></i>
                    </div>
                    <input v-model="profileData.phoneNumber" id="phoneNumber" type="tel" required
                      :disabled="!isEditMode || isLoading" class="modern-input pl-12 text-base"
                      placeholder="+234 xxx xxx xxxx">
                  </div>
                </div>

                <!-- Occupation -->
                <div>
                  <label for="occupation" class="block text-sm font-bold mb-2" style="color: var(--neutral-700);">
                    Occupation <span style="color: #ef4444;">*</span>
                  </label>
                  <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                      <i data-lucide="briefcase" class="w-5 h-5" style="color: var(--neutral-400);"></i>
                    </div>
                    <input v-model="profileData.occupation" id="occupation" type="text" required
                      :disabled="!isEditMode || isLoading" class="modern-input pl-12 text-base"
                      placeholder="Software Developer">
                  </div>
                </div>
              </div>
            </div>

            <!-- Location Section -->
            <div class="modern-card-compact" style="background: var(--neutral-50);">
              <h3 class="text-base sm:text-lg font-bold mb-3 sm:mb-4 flex items-center gap-2" style="color: var(--neutral-900);">
                <i data-lucide="map-pin" class="w-4 h-4 sm:w-5 sm:h-5" style="color: var(--primary-600);"></i>
                Location Information
              </h3>

              <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-5">

                <!-- City -->
                <div>
                  <label for="city" class="block text-sm font-bold mb-2" style="color: var(--neutral-700);">
                    City <span style="color: #ef4444;">*</span>
                  </label>
                  <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                      <i data-lucide="map-pin" class="w-5 h-5" style="color: var(--neutral-400);"></i>
                    </div>
                    <input v-model="profileData.city" id="city" type="text" required
                      :disabled="!isEditMode || isLoading" class="modern-input pl-12 text-base" placeholder="Lagos">
                  </div>
                </div>

                <!-- State -->
                <div>
                  <label for="state" class="block text-sm font-bold mb-2" style="color: var(--neutral-700);">
                    State <span style="color: #ef4444;">*</span>
                  </label>
                  <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                      <i data-lucide="map" class="w-5 h-5" style="color: var(--neutral-400);"></i>
                    </div>
                    <input v-model="profileData.state" id="state" type="text" required
                      :disabled="!isEditMode || isLoading" class="modern-input pl-12 text-base" placeholder="Lagos">
                  </div>
                </div>

                <!-- Country -->
                <div>
                  <label for="country" class="block text-sm font-bold mb-2" style="color: var(--neutral-700);">
                    Country <span style="color: #ef4444;">*</span>
                  </label>
                  <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                      <i data-lucide="globe" class="w-5 h-5" style="color: var(--neutral-400);"></i>
                    </div>
                    <input v-model="profileData.country" id="country" type="text" required
                      :disabled="!isEditMode || isLoading" class="modern-input pl-12 text-base" placeholder="Nigeria">
                  </div>
                </div>
              </div>
            </div>

            <!-- Save Button (Only visible in edit mode) -->
            <div v-if="isEditMode" class="flex flex-col sm:flex-row gap-2 sm:gap-3">
              <button type="button" @click="cancelEdit" class="btn btn-secondary flex-1 text-sm sm:text-base">
                <i data-lucide="x" class="w-4 h-4 sm:w-5 sm:h-5"></i>
                Cancel
              </button>
              <button type="submit" :disabled="isSubmitting" class="btn btn-primary flex-1 text-sm sm:text-base"
                :class="{ 'opacity-50 cursor-not-allowed': isSubmitting }">
                <i data-lucide="save" class="w-4 h-4 sm:w-5 sm:h-5"></i>
                <span v-if="!isSubmitting">Save Changes</span>
                <span v-else>Saving...</span>
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script type="module">
      import Swal from 'https://cdn.jsdelivr.net/npm/sweetalert2@11.26.17/+esm';
      import { getUserProfileApiMember, updateUserProfileApiMember } from './assets/js/services/member/controller.js';
      import { logoutApiMember } from "./assets/js/services/member/auth.js";
      import { showErrorAlert, showSuccessAlert } from './assets/js/utils/alerts.js';
      import { getCookie, deleteCookie } from './assets/js/utils/cookies.js';

      const { createApp } = Vue;


      createApp({
        data() {
          return {
            // Profile data
            profileData: {
              _id: '',
              title: '',
              fullName: '',
              email: '',
              gender: '',
              city: '',
              state: '',
              country: '',
              phoneNumber: '',
              occupation: '',
              referralCode: ''
            },

            // Token
            token: null,

            // Original data backup for cancel operation
            originalData: null,

            // UI state
            isLoading: true,
            isEditMode: false,
            isSubmitting: false
          };
        },
        created() {
          this.token = getCookie('auth_token');
          if (!this.token) {
            window.location.href = 'login.html';
            return;
          }
          // Fetch profile data on mount
          this.fetchProfile();
        },
        mounted() {

          // Initialize Lucide icons
          lucide.createIcons();
        },

        updated() {
          // Re-initialize Lucide icons after DOM updates
          this.$nextTick(() => {
            lucide.createIcons();
          });
        },

        methods: {
          /**
           * Fetches user profile data from API
           */
          async fetchProfile() {
            this.isLoading = true;

            try {
              this.token = getCookie('auth_token');
              const response = await getUserProfileApiMember(this.token);

              if (response.success && response.data) {
                // Populate profile data
                this.profileData = { ...response.data };

                // Store original data for cancel operation
                this.originalData = { ...response.data };

                this.isLoading = false;
              } else {
                throw new Error(response.message || 'Failed to fetch profile');
              }
            } catch (error) {
              console.error('Profile fetch error:', error);
              this.isLoading = false;

              showErrorAlert(error.message || 'Something went wrong');
            }
          },

          /**
           * Enables edit mode for profile
           */
          enableEditMode() {
            this.isEditMode = true;
            // Store current data as backup
            this.originalData = { ...this.profileData };
          },

          /**
           * Cancels edit mode and restores original data
           */
          cancelEdit() {
            this.isEditMode = false;
            // Restore original data
            this.profileData = { ...this.originalData };
          },

          /**
           * Updates user profile via API
           */
          async updateProfile() {
            // Prevent multiple submissions
            if (this.isSubmitting) {
              return;
            }

            this.isSubmitting = true;

            // Show loading state
            Swal.fire({
              title: 'Updating Profile',
              text: 'Please wait while we save your changes...',
              allowOutsideClick: false,
              allowEscapeKey: false,
              showConfirmButton: false,
              didOpen: () => {
                Swal.showLoading();
              }
            });

            try {
              // Prepare update payload (exclude read-only fields)
              const updatePayload = {
                title: this.profileData.title,
                fullName: this.profileData.fullName,
                gender: this.profileData.gender,
                city: this.profileData.city,
                state: this.profileData.state,
                country: this.profileData.country,
                phoneNumber: this.profileData.phoneNumber,
                occupation: this.profileData.occupation
              };

              const response = await updateUserProfileApiMember(updatePayload, this.token);

              // Close loading alert
              Swal.close();

              if (response.success) {
                // Update profile data with response
                this.profileData = { ...this.profileData, ...response.data };
                this.originalData = { ...this.profileData };

                // Disable edit mode
                this.isEditMode = false;

                // Show success message
                await Swal.fire({
                  icon: 'success',
                  title: 'Success!',
                  text: response.message || 'Profile updated successfully',
                  timer: 2000,
                  showConfirmButton: false
                });
              } else {
                throw new Error(response.message || 'Failed to update profile');
              }

              this.isSubmitting = false;
            } catch (error) {
              console.error('Profile update error:', error);

              // Close loading alert
              Swal.close();

              // Show error message
              await Swal.fire({
                icon: 'error',
                title: 'Update Failed',
                text: error.message || 'Unable to update your profile. Please try again.',
                confirmButtonText: 'OK'
              });

              this.isSubmitting = false;
            }
          },

          /**
           * Gets initials from full name for avatar
           */
          getInitials(name) {
            if (!name) return '?';

            const parts = name.trim().split(' ');
            if (parts.length === 1) {
              return parts[0].charAt(0).toUpperCase();
            }

            return (parts[0].charAt(0) + parts[parts.length - 1].charAt(0)).toUpperCase();
          },

          /**
           * Copies referral code to clipboard
           */
          async copyReferralCode() {
            try {
              await navigator.clipboard.writeText(this.profileData.referralCode);

              await Swal.fire({
                icon: 'success',
                title: 'Copied!',
                text: 'Referral code copied to clipboard',
                timer: 1500,
                showConfirmButton: false,
                toast: true,
                position: 'top-end'
              });
            } catch (error) {
              console.error('Copy error:', error);

              await Swal.fire({
                icon: 'error',
                title: 'Copy Failed',
                text: 'Unable to copy referral code',
                timer: 1500,
                showConfirmButton: false,
                toast: true,
                position: 'top-end'
              });
            }
          },

          /**
           * Handles user logout
           */
          async handleLogout() {
            if (confirm("Are you sure you want to logout?")) {
              try {
                await logoutApiMember(this.token);
                // On success, clear storage and redirect
                deleteCookie("auth_token");
                deleteCookie("user_data");
                localStorage.removeItem("VerissApp");
                window.location.href = "login.html";
              } catch (error) {
                // Handle API failure: show error message and proceed with local logout
                alert("Logout failed. Please try again or contact support.");
                // Proceed with clearing storage anyway
                deleteCookie("auth_token");
                deleteCookie("user_data");
                localStorage.removeItem("VerissApp");
                window.location.href = "login.html";
              }
            }
          }
        }
      }).mount('#app');
    </script>
  </body>

</html>