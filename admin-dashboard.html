<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Veriss Payments</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <link rel="stylesheet" href="assets/css/app.css">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="assets/js/auth.js"></script>
    <script src="assets/js/admin.js"></script>
  </head>

  <body class="bg-neutral-50">
    <div id="app" class="min-h-screen">
      <header class="modern-header" style="background: linear-gradient(135deg, #9333ea 0%, #7e22ce 100%);">
        <div class="modern-container flex justify-between items-center">
          <h1 class="text-2xl font-bold text-white flex items-center gap-2">
            <i data-lucide="shield" class="w-6 h-6"></i>
            Super Admin Dashboard
          </h1>
          <button @click="logout" class="btn btn-outline text-white border-white hover:bg-white/10">
            <i data-lucide="log-out" class="w-4 h-4"></i>
            Logout
          </button>
        </div>
      </header>

      <main class="modern-container py-8">
        <div class="modern-grid modern-grid-4 mb-8">
          <div class="stat-card">
            <div class="flex items-center justify-between mb-2">
              <h3 class="text-sm font-medium text-neutral-600 uppercase tracking-wide">Total Organizations</h3>
              <i data-lucide="building-2" class="w-5 h-5 text-primary-600"></i>
            </div>
            <p class="stat-value text-primary-600">{{ stats.totalOrganizations || 0 }}</p>
          </div>
          <div class="stat-card">
            <div class="flex items-center justify-between mb-2">
              <h3 class="text-sm font-medium text-neutral-600 uppercase tracking-wide">Total Users</h3>
              <i data-lucide="users" class="w-5 h-5 text-success-600"></i>
            </div>
            <p class="stat-value text-success-600">{{ stats.totalUsers || 0 }}</p>
          </div>
          <div class="stat-card">
            <div class="flex items-center justify-between mb-2">
              <h3 class="text-sm font-medium text-neutral-600 uppercase tracking-wide">Total Payments</h3>
              <i data-lucide="credit-card" class="w-5 h-5" style="color: #9333ea;"></i>
            </div>
            <p class="stat-value" style="color: #9333ea;">{{ stats.totalPayments || 0 }}</p>
          </div>
          <div class="stat-card">
            <div class="flex items-center justify-between mb-2">
              <h3 class="text-sm font-medium text-neutral-600 uppercase tracking-wide">Active This Month</h3>
              <i data-lucide="activity" class="w-5 h-5 text-warning-600"></i>
            </div>
            <p class="stat-value text-warning-600">{{ stats.totalPayments || 0 }}</p>
          </div>
        </div>

        <div class="modern-grid modern-grid-2 mb-8">
          <div class="modern-card">
            <h2 class="text-xl font-semibold mb-6 flex items-center gap-2 text-neutral-900">
              <i data-lucide="clock" class="w-5 h-5 text-primary-600"></i>
              Recent Payments
            </h2>
            <div class="space-y-4">
              <div v-for="payment in stats.recentPayments" class="flex justify-between items-center p-3 rounded-lg hover:bg-neutral-50 transition-colors">
                <div>
                  <p class="font-semibold text-neutral-900">{{ payment.orgName }}</p>
                  <p class="text-sm text-neutral-500">{{ payment.date }}</p>
                </div>
                <div class="text-right">
                  <p class="font-bold text-neutral-900">â‚¦{{ payment.amount?.toLocaleString() || 0 }}</p>
                  <span :class="getStatusClass(payment.status)" class="status-badge mt-1">
                    {{ payment.status }}
                  </span>
                </div>
              </div>
              <div v-if="!stats.recentPayments || stats.recentPayments.length === 0" class="text-center text-neutral-500 py-4">
                No recent payments
              </div>
            </div>
          </div>

          <div class="modern-card">
            <h2 class="text-xl font-semibold mb-6 flex items-center gap-2 text-neutral-900">
              <i data-lucide="building-2" class="w-5 h-5 text-primary-600"></i>
              Organizations
            </h2>
            <div class="space-y-4">
              <div v-for="org in stats.organizations" class="flex justify-between items-center p-3 rounded-lg hover:bg-neutral-50 transition-colors">
                <div>
                  <p class="font-semibold text-neutral-900">{{ org.name }}</p>
                  <p class="text-sm text-neutral-500">{{ org.members }} members</p>
                </div>
                <span :class="org.status === 'active' ? 'status-paid' : 'bg-neutral-100 text-neutral-800'"
                  class="status-badge">
                  {{ org.status }}
                </span>
              </div>
              <div v-if="!stats.organizations || stats.organizations.length === 0" class="text-center text-neutral-500 py-4">
                No organizations
              </div>
            </div>
          </div>
        </div>

        <div class="modern-card">
          <h2 class="text-xl font-semibold mb-6 flex items-center gap-2 text-neutral-900">
            <i data-lucide="settings" class="w-5 h-5 text-primary-600"></i>
            Admin Actions
          </h2>
          <div class="modern-grid modern-grid-3">
            <button class="btn btn-primary py-4">
              <i data-lucide="building-2" class="w-5 h-5"></i>
              View All Organizations
            </button>
            <button class="btn btn-success py-4">
              <i data-lucide="file-text" class="w-5 h-5"></i>
              Generate Reports
            </button>
            <button class="btn py-4" style="background: linear-gradient(135deg, #9333ea 0%, #7e22ce 100%); color: white;">
              <i data-lucide="settings" class="w-5 h-5"></i>
              System Settings
            </button>
          </div>
        </div>
      </main>
    </div>

    <script>
      const { createApp } = Vue;

      createApp({
        data() {
          return {
            stats: {}
          }
        },
        mounted() {
          lucide.createIcons();
          const user = getCurrentUser();
          if (user && user.role === 'admin') {
            this.stats = getAdminStats();
          } else {
            window.location.href = 'login.html';
          }
        },
        updated() {
          lucide.createIcons();
        },
        methods: {
          logout() {
            logout();
            window.location.href = 'index.html';
          },
          getStatusClass(status) {
            return {
              'paid': 'status-paid',
              'pending': 'status-pending',
              'failed': 'status-failed'
            }[status] || 'bg-neutral-100 text-neutral-800';
          }
        }
      }).mount('#app');
    </script>
  </body>

</html>